<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="dev.mvc.breply.BreplyDAOInter">

  <!-- 댓글 입력 -->
  <insert id="replycreate" parameterType="dev.mvc.breply.BreplyVO">
    INSERT INTO breply(BREPLYNO, BREPLYCONT, BREPLYIMG, BREPLYSAVED, BREPLYTHUMB, BREPLYSIZE, BREPLYDATE, BREPLYPASSWD, boardno, accountno, managerno)
    VALUES(breply_seq.nextval, #{breplycont}, #{breplyimg}, #{breplysaved}, #{breplythumb}, #{breplysize}, sysdate, #{breplypasswd}, #{boardno}, #{accountno}, #{managerno})
  </insert>

  <!-- 댓글 목록 -->
  <!-- <select id="reply_list" resultType="dev.mvc.breply.BreplyVO">
    SELECT BREPLYNO, BREPLYCONT, BREPLYIMG, BREPLYSAVED, BREPLYTHUMB, BREPLYSIZE, BREPLYDATE, BREPLYPASSWD
    FROM breply
    ORDER BY BREPLYNO ASC
  </select> -->

  <!-- 댓글 목록 -->
  <select id="reply_list" resultType="dev.mvc.breply.BreplyVO" parameterType="int">
    SELECT BREPLYNO, BREPLYCONT, BREPLYIMG, BREPLYSAVED, BREPLYTHUMB, BREPLYSIZE, BREPLYDATE, BREPLYPASSWD
    FROM breply
    WHERE boardno = #{boardno}
  </select>

  <!-- 댓글 읽기 -->
  <select id="read" resultType="dev.mvc.breply.BreplyVO" parameterType="int">
    SELECT BREPLYNO, BREPLYCONT, BREPLYIMG, BREPLYSAVED, BREPLYTHUMB, BREPLYSIZE, BREPLYDATE, BREPLYPASSWD
    FROM breply
    WHERE breplyno = #{breplyno}
  </select>

  <!-- 댓글 수정 -->
  <update id="update" parameterType="dev.mvc.breply.BreplyVO">
    UPDATE BREPLY
    SET BREPLYCONT = #{breplycont}, BREPLYIMG = #{breplyimg}, BREPLYSAVED = #{breplysaved}, BREPLYthumb = #{breplythumb}, BREPLYSIZE = #{breplysize}, BREPLYDATE = sysdate
    WHERE BREPLYNO = #{breplyno}
  </update>

  <delete id="delete" parameterType="int">
    delete BREPLY
    WHERE BREPLYNO = #{breplyno}
  </delete>

  <select id="password_check" resultType="int" parameterType="HashMap">
    SELECT COUNT(*) as cnt 
    FROM breply
    WHERE breplyno = #{breplyno} AND BREPLYPASSWD = #{breplypasswd}
  </select>

</mapper>