<!DOCTYPE html>
<html layout:decorate="~{th/layout}">
  <div layout:fragment="content">
    <div class="title_line"></div>

    <div class="menu_line"></div>
    <style>
      body {
        font-family: Arial, sans-serif;
        margin: 0;
        padding: 0;
      }
      .container {
        max-width: 800px;
        margin: 50px auto;
        background-color: #fff;
        padding: 20px;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
      }
      h1 {
        text-align: center;
        color: #333;
      }
      h2 {
        text-align: center;
        color: #666;
      }
      table {
        width: 100%;
        border-collapse: collapse;
      }
      th,
      td {
        border: 1px solid #ddd;
        padding: 8px;
        text-align: center;
      }
      th {
        background-color: #4caf50;
        color: white;
      }
      tr:nth-child(even) {
        background-color: #f2f2f2;
      }
      input[type="text"] {
        width: 100%;
        box-sizing: border-box;
        padding: 5px;
      }
      button {
        margin-top: 20px;
        padding: 10px 20px;
        background-color: #4caf50;
        color: white;
        border: none;
        cursor: pointer;
      }
      button:hover {
        background-color: #45a049;
      }
    </style>
    <script>
      function getCurrentWeekDates() {
        const currentDate = new Date();
        const firstDay = new Date(currentDate.setDate(currentDate.getDate() - currentDate.getDay() + 1));
        const lastDay = new Date(currentDate.setDate(firstDay.getDate() + 6));

        const formatDate = (date) => {
          const year = date.getFullYear();
          const month = String(date.getMonth() + 1).padStart(2, "0");
          const day = String(date.getDate()).padStart(2, "0");
          return `${year}-${month}-${day}`;
        };

        document.getElementById("weekDates").innerText = `${formatDate(firstDay)} ~ ${formatDate(lastDay)}`;
      }

      window.onload = function () {
        getCurrentWeekDates();
      };

      // form 전송 전에 weekDates 값을 hidden input에 넣는 함수
      function addWeekDatesToForm() {
        const weekDates = document.getElementById("weekDates").textContent;
        const weekDatesInput = document.createElement("input");
        weekDatesInput.type = "hidden";
        weekDatesInput.name = "weekdates";
        weekDatesInput.value = weekDates;

        document.querySelector("form").appendChild(weekDatesInput);
      }
    </script>

    <div>
      <h1>주간 식단표 작성</h1>
      <h2>기간: <a id="weekDates"></a></h2>

      <form action="/week/create" method="POST" onsubmit="addWeekDatesToForm()">
        <input type="hidden" name="accountno" th:value="${accountno}" />
        <table>
          <thead>
            <tr>
              <th></th>
              <th>월요일</th>
              <th>화요일</th>
              <th>수요일</th>
              <th>목요일</th>
              <th>금요일</th>
              <th>토요일</th>
              <th>일요일</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <th>아침</th>
              <td><input type="text" name="monbreakfast" placeholder="아침 메뉴" /></td>
              <td><input type="text" name="tuebreakfast" placeholder="아침 메뉴" /></td>
              <td><input type="text" name="wedbreakfast" placeholder="아침 메뉴" /></td>
              <td><input type="text" name="thubreakfast" placeholder="아침 메뉴" /></td>
              <td><input type="text" name="fribreakfast" placeholder="아침 메뉴" /></td>
              <td><input type="text" name="satbreakfast" placeholder="아침 메뉴" /></td>
              <td><input type="text" name="sunbreakfast" placeholder="아침 메뉴" /></td>
            </tr>
            <tr>
              <th>점심</th>
              <td><input type="text" name="monlunch" placeholder="점심 메뉴" /></td>
              <td><input type="text" name="tuelunch" placeholder="점심 메뉴" /></td>
              <td><input type="text" name="wedlunch" placeholder="점심 메뉴" /></td>
              <td><input type="text" name="thulunch" placeholder="점심 메뉴" /></td>
              <td><input type="text" name="frilunch" placeholder="점심 메뉴" /></td>
              <td><input type="text" name="satlunch" placeholder="점심 메뉴" /></td>
              <td><input type="text" name="sunlunch" placeholder="점심 메뉴" /></td>
            </tr>
            <tr>
              <th>저녁</th>
              <td><input type="text" name="mondinner" placeholder="저녁 메뉴" /></td>
              <td><input type="text" name="tuedinner" placeholder="저녁 메뉴" /></td>
              <td><input type="text" name="weddinner" placeholder="저녁 메뉴" /></td>
              <td><input type="text" name="thudinner" placeholder="저녁 메뉴" /></td>
              <td><input type="text" name="fridinner" placeholder="저녁 메뉴" /></td>
              <td><input type="text" name="satdinner" placeholder="저녁 메뉴" /></td>
              <td><input type="text" name="sundinner" placeholder="저녁 메뉴" /></td>
            </tr>
            <tr>
              <th>칼로리</th>
              <td><input type="text" name="moncal" placeholder="칼로리" />Kcal</td>
              <td><input type="text" name="tuecal" placeholder="칼로리" />Kcal</td>
              <td><input type="text" name="wedcal" placeholder="칼로리" />Kcal</td>
              <td><input type="text" name="thucal" placeholder="칼로리" />Kcal</td>
              <td><input type="text" name="frical" placeholder="칼로리" />Kcal</td>
              <td><input type="text" name="satcal" placeholder="칼로리뉴" />Kcal</td>
              <td><input type="text" name="suncal" placeholder="칼로리" />Kcal</td>
            </tr>
          </tbody>
        </table>
        <button class="" type="submit">저장</button>
      </form>
    </div>
  </div>
</html>
