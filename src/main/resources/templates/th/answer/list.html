<!DOCTYPE html>

<html layout:decorate="~{th/layout}"> <!-- layout.html 상속-->

<div layout:fragment="content">

  <div th:if="${session.managerno != null}">
  <div class='title_line'>질문 목록(관리자 전용)</div>

  <aside class="aside_right">
    <a href="javascript:location.reload();">새로고침</a>
    <span class='menu_divide'>│</span>
    <a href='./create'>회원 가입</a>
    <span class='menu_divide'>│</span>
    <a href='./list'>목록</a>
  </aside>

  <div th:replace="~{th/answer/list_search_component::list_search_fragment}"></div>
  <div class='menu_line'></div>


    <table class="table table-striped" style='width: 100%;'>
      <colgroup>
        <col style='width: 10%;' />
        <col style='width: 10%;' />
        <col style='width: 70%;' />
        <col style='width: 15%;' />
      </colgroup>
      <tr>
        <th class='th_bs'>사용자 이름</th>
        <th class='th_bs'>질문 이미지</th>
        <th class='th_bs'>답변</th>
        <th class='th_bs'>질문 등록일</th>
      </tr>

      <tr th:each="answerVO, status : ${list}" th:with="aiVO=${img[status.index]}">
        <td class='td_basic' th:text="${answerVO.aname}"></td>
        <td class='td_basic'>
          <div
            th:if="${aiVO.img_search.endsWith('jpg') or aiVO.img_search.endsWith('png') or aiVO.img_search.endsWith('gif')}">
            <img th:src="@{|/contents/storage/${aiVO.img_search_thumb}|}" style="width: 90px; height: 70px;">
          </div>

          <div th:if="${img_search_size == 0}">
            <img src="/account/images/basic.jpg" style="width: 90px; height: 70px;">
          </div>
        </td>

        <td id="text_answer" class='td_basic' th:text="${answerVO.text_answer}"></td>
        <td class='td_basic' th:text="${aiVO.rdate.substring(0, 10)}"></td>

      </tr>
    </table>
  </div>

  <div th:unless="${session.managerno != null}">
    <!-- 일반 사용자의 경우 출력할 테이블 -->
    <div class='title_line'>질문 목록</div>

  <aside class="aside_right">
    <a href="javascript:location.reload();">새로고침</a>
    <span class='menu_divide'>│</span>
    <a href='./list'>검색 목록</a>
  </aside>

  <div th:replace="~{th/answer/list_search_component::list_search_fragment}"></div>
  <div class='menu_line'></div>
    <table class="table table-striped" style='width: 100%;'>
      <colgroup>
        <col style='width: 20%;' />
        <col style='width: 80%;' />
      </colgroup>
      <tr>
        <th class='th_bs'>질문 이미지</th>
        <th class='th_bs'>답변</th>
      </tr>

      <tr th:each="answerVO, status : ${list}" th:with="aiVO=${img[status.index]}">
        <td class='td_basic'>
          <div
            th:if="${aiVO.img_search.endsWith('jpg') or aiVO.img_search.endsWith('png') or aiVO.img_search.endsWith('gif')}">
            <img th:src="@{|/contents/storage/${aiVO.img_search_thumb}|}" style="width: 90px; height: 70px;">
          </div>

          <div th:if="${img_search_size == 0}">
            <img src="/account/images/basic.jpg" style="width: 90px; height: 70px;">
          </div>
        </td>

        <td class='td_basic' th:text="${answerVO.text_answer}"></td>

      </tr>
    </table>
  </div>

  <div class="bottom_menu" th:utext="${paging}"></div>
  <!-- 페이지 버튼 목록 출력 종료 -->
</div>

<div class='bottom_menu'>
  <button type='button' onclick="location.reload();" class="btn btn-primary btn-sm">새로 고침</button>
</div>

</div>

</html>